# ğŸ® Unityè´ªåƒæ–¹å—æ¸¸æˆé¡¹ç›®è¯¦ç»†è¯´æ˜

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

**é¡¹ç›®åç§°**ï¼šè´ªåƒæ–¹å—ï¼ˆè´ªåƒè›‡+ä¿„ç½—æ–¯æ–¹å—æ··åˆæ¸¸æˆï¼‰  
**å¼€å‘ç¯å¢ƒ**ï¼šUnityå¼•æ“ + C#ç¼–ç¨‹è¯­è¨€  
**é¡¹ç›®ç±»å‹**ï¼š2025å¹´cppç¨‹åºè®¾è®¡åŸºç¡€è¯¾ç¨‹å¤§ä½œä¸š  
**æ¸¸æˆç±»å‹**ï¼šç­–ç•¥ç±»ç›Šæ™ºæ¸¸æˆï¼ˆè´ªåƒè›‡ä¸ä¿„ç½—æ–¯æ–¹å—çš„åˆ›æ–°ç»“åˆï¼‰

## ğŸ—ï¸ é¡¹ç›®æ¶æ„è®¾è®¡

### é¡¹ç›®æ–‡ä»¶ç»“æ„

## ğŸ’» æ ¸å¿ƒä»£ç é€»è¾‘åˆ†æ

### 1. æ¸¸æˆçŠ¶æ€ç®¡ç†ç³»ç»Ÿ (Game.cs)

Gameç±»å®ç°äº†æ¸¸æˆçš„çŠ¶æ€æœºæ¨¡å¼ï¼š

```csharp
public class Game : MonoBehaviour
{
    // æ¸¸æˆçŠ¶æ€é¢æ¿æ•°ç»„ï¼š0-æ¸¸æˆç»“æŸï¼Œ1-å¼€å§‹ç•Œé¢ï¼Œ2-å¸®åŠ©ç•Œé¢ï¼Œ3-æ¸¸æˆè¿›è¡Œä¸­
    public static GameObject[] con;
    
    public static void show(int stateIndex)
    {
        for (int i = 0; i < 4; i++)
        {
            // çŠ¶æ€æ¨¡å¼å®ç°ï¼šåªæ˜¾ç¤ºå½“å‰çŠ¶æ€å¯¹åº”çš„é¢æ¿
            con[i].SetActive(i == stateIndex);
        }
    }
}
```

**çŠ¶æ€è½¬æ¢æ–¹æ³•**ï¼š
- `gameStart()` - æ˜¾ç¤ºå¼€å§‹ç•Œé¢
- `gamePlay()` - è¿›å…¥æ¸¸æˆæ¨¡å¼
- `gameHelp()` - æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
- `gameOver()` - æ¸¸æˆç»“æŸå¤„ç†
- `gameExit()` - é€€å‡ºåº”ç”¨ç¨‹åº

### 2. æ¸¸æˆæ ¸å¿ƒé€»è¾‘ (FK.cs)

FKç±»å®ç°äº†è´ªåƒè›‡ä¸ä¿„ç½—æ–¯æ–¹å—çš„æ··åˆæ¸¸æˆé€»è¾‘ï¼š

#### **æ•°æ®ç»“æ„è®¾è®¡**
```csharp
int w = 10;  // æ¸¸æˆåŒºåŸŸå®½åº¦ï¼ˆ10æ ¼ï¼‰
int h = 16;  // æ¸¸æˆåŒºåŸŸé«˜åº¦ï¼ˆ16æ ¼ï¼‰
GameObject[,] gameObjects;  // 10Ã—16çš„æ¸¸æˆç½‘æ ¼
GameObject[] s;  // å½“å‰æ´»åŠ¨çš„è›‡ï¼ˆ4ä¸ªç»„æˆéƒ¨åˆ†ï¼‰
```

#### **æ¸¸æˆå¾ªç¯æœºåˆ¶**
```csharp
void Update()
{
    // æ–¹å‘é”®è¾“å…¥å¤„ç†
    HandleArrowKeys();
    
    // è›‡å¤´æ–¹å‘æ—‹è½¬
    headR();
    
    // è‡ªåŠ¨ç§»åŠ¨æœºåˆ¶ï¼ˆæ¯0.7ç§’ç§»åŠ¨ä¸€æ¬¡ï¼‰
    if (Time.time - lastFall >= 0.7)
    {
        runS();
        lastFall = Time.time;
    }
    
    // åŠ é€Ÿä¸‹è½å¤„ç†
    if (down && Time.time - lastFall >= 0.05)
    {
        Down();
        lastFall = Time.time;
    }
}
```

#### **ç¢°æ’æ£€æµ‹ç³»ç»Ÿ**
```csharp
void runS()
{
    Vector2 targetPosition = new Vector2(currentX + directionX, currentY + directionY);
    
    // è¾¹ç•Œæ£€æµ‹å’Œç¢°æ’æ£€æµ‹
    if (targetPosition.x < 0 || targetPosition.x >= w || 
        targetPosition.y >= h || gameObjects[(int)targetPosition.x, (int)targetPosition.y])
    {
        SDie();  // æ¸¸æˆç»“æŸ
        return;
    }
    
    // é£Ÿç‰©æ£€æµ‹
    if (targetPosition == foodPosition)
    {
        fen += 10;  // å¾—åˆ†å¢åŠ 
        down = true; // è¿›å…¥åŠ é€Ÿä¸‹è½æ¨¡å¼
        food.SetActive(false);
    }
}
```

#### **æ¶ˆè¡Œç®—æ³•å®ç°**
```csharp
void GridDown()
{
    for (int y = 0; y < h; y++)
    {
        bool isFullLine = true;
        
        // æ£€æŸ¥è¯¥è¡Œæ˜¯å¦å®Œå…¨å¡«æ»¡
        for (int x = 0; x < w; x++)
        {
            if (!gameObjects[x, y])
            {
                isFullLine = false;
                break;
            }
        }
        
        // å¦‚æœæ•´è¡Œå¡«æ»¡ï¼Œæ¶ˆé™¤å¹¶å¾—åˆ†
        if (isFullLine)
        {
            fen += 100;
            DelH(y);  // æ¶ˆé™¤è¯¥è¡Œ
            y--;      // é‡æ–°æ£€æŸ¥å½“å‰è¡Œï¼ˆå› ä¸ºè¡Œä¸‹ç§»äº†ï¼‰
        }
    }
}
```

### 3. ç”¨æˆ·äº¤äº’ç³»ç»Ÿ (Buttom.cs)

Buttomç±»å¤„ç†é¼ æ ‡ç‚¹å‡»äº‹ä»¶ï¼š

```csharp
void Update()
{
    if (Input.GetMouseButtonDown(0))  // é¼ æ ‡å·¦é”®ç‚¹å‡»æ£€æµ‹
    {
        // å°„çº¿æ£€æµ‹æŠ€æœ¯å®ç°æŒ‰é’®ç‚¹å‡»
        Ray ray = Camera.main.ScreenPointToRay(Input.mousePosition);
        RaycastHit hit;
        
        if (Physics.Raycast(ray, out hit))
        {
            GameObject clickedObject = hit.collider.gameObject;
            
            // æ ¹æ®æŒ‰é’®åç§°æ‰§è¡Œç›¸åº”åŠŸèƒ½
            switch (clickedObject.name)
            {
                case "game": Game.gamePlay(); break;    // å¼€å§‹æ¸¸æˆ
                case "help": Game.gameHelp(); break;    // æ˜¾ç¤ºå¸®åŠ©
                case "exit": Game.gameExit(); break;    // é€€å‡ºæ¸¸æˆ
                case "syS": Game.stopBGM(); break;      // åœæ­¢éŸ³ä¹
                case "sy": Game.playBGM(); break;       // æ’­æ”¾éŸ³ä¹
            }
        }
    }
}
```

### 4. éŸ³é¢‘ç®¡ç†ç³»ç»Ÿ (Music.cs)

Musicç±»å®ç°èƒŒæ™¯éŸ³ä¹ç®¡ç†ï¼š

```csharp
void OnEnable()
{
    // åŠ¨æ€åŠ è½½éŸ³é¢‘èµ„æº
    Sound = gameObject.GetComponent<AudioSource>();
    Sound.clip = (AudioClip)Resources.Load("bgm", typeof(AudioClip));
    Sound.Play();  // è‡ªåŠ¨æ’­æ”¾èƒŒæ™¯éŸ³ä¹
}
```

## ğŸ¯ æ¸¸æˆæœºåˆ¶è¯¦è§£

### 1. **æ··åˆæ¸¸æˆç©æ³•**
- **è´ªåƒè›‡å…ƒç´ **ï¼šæ§åˆ¶è›‡ç§»åŠ¨ï¼Œåƒåˆ°é£Ÿç‰©åèº«ä½“å˜é•¿
- **ä¿„ç½—æ–¯æ–¹å—å…ƒç´ **ï¼šæ–¹å—å †å ï¼Œæ¶ˆé™¤å®Œæ•´è¡Œå¾—åˆ†

### 2. **æ§åˆ¶æ–¹å¼**
- **æ–¹å‘é”®**ï¼šæ§åˆ¶è›‡çš„ç§»åŠ¨æ–¹å‘
- **è‡ªåŠ¨ä¸‹è½**ï¼šæ¯0.7ç§’è‡ªåŠ¨ä¸‹è½ä¸€æ ¼
- **åŠ é€Ÿä¸‹è½**ï¼šåƒåˆ°é£Ÿç‰©åè¿›å…¥åŠ é€Ÿæ¨¡å¼

### 3. **å¾—åˆ†ç³»ç»Ÿ**
- **åƒåˆ°é£Ÿç‰©**ï¼š+10åˆ†
- **æ¶ˆé™¤ä¸€è¡Œ**ï¼š+100åˆ†
- **å®æ—¶æ˜¾ç¤º**ï¼šåŠ¨æ€ç”Ÿæˆæ•°å­—æ˜¾ç¤ºå½“å‰åˆ†æ•°

### 4. **æ¸¸æˆçŠ¶æ€**
1. **å¼€å§‹ç•Œé¢**ï¼šæ¸¸æˆåˆå§‹çŠ¶æ€
2. **æ¸¸æˆè¿›è¡Œ**ï¼šæ ¸å¿ƒæ¸¸æˆé€»è¾‘è¿è¡Œ
3. **å¸®åŠ©ç•Œé¢**ï¼šæ¸¸æˆè§„åˆ™è¯´æ˜
4. **æ¸¸æˆç»“æŸ**ï¼šæ˜¾ç¤ºæœ€ç»ˆæˆç»©

## ğŸ”§ æŠ€æœ¯å®ç°äº®ç‚¹

### 1. **é¢å‘å¯¹è±¡è®¾è®¡**
- æ¸…æ™°çš„ç±»èŒè´£åˆ’åˆ†
- æ¨¡å—åŒ–çš„ä»£ç ç»“æ„
- å¯æ‰©å±•çš„æ¸¸æˆæ¶æ„

### 2. **æ—¶é—´æ§åˆ¶æœºåˆ¶**
```csharp
// å¸§ç‡æ— å…³çš„æ¸¸æˆé€»è¾‘
if (Time.time - lastFall >= 0.7)
{
    // æ‰§è¡Œæ¸¸æˆé€»è¾‘
    lastFall = Time.time;
}
```

### 3. **å†…å­˜ç®¡ç†ä¼˜åŒ–**
```csharp
void OnDisable()
{
    // æ­£ç¡®é‡Šæ”¾æ¸¸æˆå¯¹è±¡ï¼Œé¿å…å†…å­˜æ³„æ¼
    for (int i = 0; i < s.Length; i++)
    {
        Destroy(s[i]);
    }
}
```

### 4. **èµ„æºåŠ¨æ€ç®¡ç†**
- é¢„åˆ¶ä½“å®ä¾‹åŒ–æŠ€æœ¯
- éŸ³é¢‘èµ„æºåŠ¨æ€åŠ è½½
- UIå…ƒç´ åŠ¨æ€æ˜¾ç¤º/éšè—

## ğŸ“ æ•™å­¦ä»·å€¼åˆ†æ

### é€‚åˆC++ç¨‹åºè®¾è®¡è¯¾ç¨‹çš„æ•™å­¦ç‚¹ï¼š

1. **æ•°æ®ç»“æ„åº”ç”¨**
   - äºŒç»´æ•°ç»„è¡¨ç¤ºæ¸¸æˆç½‘æ ¼
   - æ•°ç»„æ“ä½œå’Œéå†ç®—æ³•
   - åŠ¨æ€æ•°ç»„ç®¡ç†

2. **ç®—æ³•å®ç°**
   - ç¢°æ’æ£€æµ‹ç®—æ³•
   - æ¶ˆè¡Œç®—æ³•
   - æ¸¸æˆå¾ªç¯æ§åˆ¶

3. **é¢å‘å¯¹è±¡æ¦‚å¿µ**
   - ç±»çš„å°è£…æ€§
   - æ–¹æ³•çš„é‡ç”¨æ€§
   - çŠ¶æ€æ¨¡å¼åº”ç”¨

4. **æ¸¸æˆå¼€å‘åŸºç¡€**
   - æ¸¸æˆå¾ªç¯è®¾è®¡
   - ç”¨æˆ·è¾“å…¥å¤„ç†
   - æ—¶é—´æ§åˆ¶æœºåˆ¶

## ğŸ”„ C#ä¸C++è¯­æ³•å¯¹æ¯”

### ç›¸ä¼¼ä¹‹å¤„ï¼š
```csharp
// C# - æ•°ç»„å£°æ˜å’Œä½¿ç”¨
int[,] grid = new int[10, 16];
for (int i = 0; i < 10; i++) {
    for (int j = 0; j < 16; j++) {
        // æ•°ç»„æ“ä½œ
    }
}

// C++ ç­‰æ•ˆä»£ç 
int grid[10][16];
for (int i = 0; i < 10; i++) {
    for (int j = 0; j < 16; j++) {
        // æ•°ç»„æ“ä½œ
    }
}
```

### Unityç‰¹æœ‰ç‰¹æ€§ï¼š
- `MonoBehaviour`åŸºç±»
- `Update()`è‡ªåŠ¨è°ƒç”¨æœºåˆ¶
- Unityç»„ä»¶ç³»ç»Ÿ
- èµ„æºç®¡é“ç®¡ç†

## ğŸ“Š é¡¹ç›®æ”¹è¿›å»ºè®®

### 1. **ä»£ç ä¼˜åŒ–**
- æ·»åŠ æ›´å¤šæ³¨é‡Šè¯´æ˜
- æå–å¸¸é‡å®šä¹‰
- ä¼˜åŒ–ç®—æ³•æ•ˆç‡

### 2. **åŠŸèƒ½æ‰©å±•**
- æ·»åŠ éš¾åº¦çº§åˆ«
- å®ç°å­˜æ¡£åŠŸèƒ½
- æ·»åŠ éŸ³æ•ˆç³»ç»Ÿ

### 3. **ç”¨æˆ·ä½“éªŒ**
- ä¼˜åŒ–UIç•Œé¢
- æ·»åŠ æ¸¸æˆæ•™ç¨‹
- å®ç°é«˜åˆ†è®°å½•

## ğŸš€ è¿è¡Œè¯´æ˜

1. **ç¯å¢ƒè¦æ±‚**ï¼šUnity 2019.4+ ç‰ˆæœ¬
2. **æ‰“å¼€é¡¹ç›®**ï¼šä½¿ç”¨Unity Hubæ‰“å¼€é¡¹ç›®æ–‡ä»¶å¤¹
3. **è¿è¡Œæ¸¸æˆ**ï¼šæ‰“å¼€SampleSceneåœºæ™¯ï¼Œç‚¹å‡»æ’­æ”¾æŒ‰é’®
4. **æ„å»ºå‘å¸ƒ**ï¼šFile â†’ Build Settings è¿›è¡Œå¹³å°æ„å»º

## ğŸ“ æ€»ç»“

è¿™ä¸ªUnityè´ªåƒæ–¹å—é¡¹ç›®å±•ç¤ºäº†å®Œæ•´çš„æ¸¸æˆå¼€å‘æµç¨‹ï¼Œä»é¡¹ç›®æ¶æ„è®¾è®¡åˆ°å…·ä½“ä»£ç å®ç°ï¼Œä½“ç°äº†è‰¯å¥½çš„è½¯ä»¶å·¥ç¨‹å®è·µã€‚é¡¹ç›®ç»“åˆäº†è´ªåƒè›‡å’Œä¿„ç½—æ–¯æ–¹å—çš„æ¸¸æˆæœºåˆ¶ï¼Œåˆ›æ–°æ€§åœ°å®ç°äº†ä¸¤ç§ç»å…¸æ¸¸æˆçš„èåˆï¼Œå…·æœ‰å¾ˆé«˜çš„æ•™å­¦ä»·å€¼å’Œå‚è€ƒæ„ä¹‰ã€‚

é€šè¿‡åˆ†æè¿™ä¸ªé¡¹ç›®ï¼Œå­¦ä¹ è€…å¯ä»¥æ·±å…¥ç†è§£æ¸¸æˆå¼€å‘çš„æ ¸å¿ƒæ¦‚å¿µï¼Œä¸ºåç»­çš„C++æ¸¸æˆå¼€å‘å­¦ä¹ å¥ å®šåšå®åŸºç¡€ã€‚

---

*æ–‡æ¡£åˆ›å»ºæ—¶é—´ï¼š2024å¹´*  
*é¡¹ç›®åˆ†æåŸºäºå®é™…ä»£ç å®ç°*

## ğŸ’¡ ä½¿ç”¨å»ºè®®

ä½ å¯ä»¥å°†è¿™ä»½æ–‡æ¡£ç”¨äºï¼š
- **è¯¾ç¨‹å±•ç¤º**ï¼šåœ¨C++ç¨‹åºè®¾è®¡è¯¾ç¨‹ä¸­ä½œä¸ºæ¡ˆä¾‹è®²è§£
- **é¡¹ç›®æ–‡æ¡£**ï¼šä½œä¸ºé¡¹ç›®çš„æŠ€æœ¯æ–‡æ¡£
- **å­¦ä¹ å‚è€ƒ**ï¼šå¸®åŠ©ç†è§£Unityæ¸¸æˆå¼€å‘æµç¨‹
- **ä»£ç åˆ†æ**ï¼šæ·±å…¥ç†è§£é¢å‘å¯¹è±¡è®¾è®¡å’Œæ¸¸æˆç®—æ³•
